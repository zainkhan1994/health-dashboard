<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Medical Records - Zain Khan</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f5f5f5; }
        .container { max-width: 1800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        h1 { color: #333; }
        .patient-info { margin-bottom: 20px; color: #666; font-size: 14px; }
        .toggle-buttons { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .toggle-button { padding: 10px 20px; background: #e0e0e0; border: none; border-radius: 5px; cursor: pointer; font-size: 14px; }
        .toggle-button.active { background: #007bff; color: white; }
        .test-group { display: none; }
        .test-group.active { display: block; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 11px; }
        th, td { padding: 6px; border: 1px solid #ddd; text-align: left; }
        th { background: #f8f8f8; font-weight: bold; position: sticky; top: 0; }
        .result-normal { background: #e6ffe6; }
        .result-low { background: #fff9e6; }
        .result-high { background: #ffe6e6; }
        .test-name { font-weight: bold; }
        .overflow { overflow-x: auto; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Complete Medical Records</h1>
        <div class="patient-info"><strong>Patient:</strong> Zain Khan | <strong>DOB:</strong> March 9, 1994 (Age 31)</div>
        
        <div class="toggle-buttons">
            <button class="toggle-button active" data-target="timeline">Timeline</button>
            <button class="toggle-button" data-target="all">All Tests</button>
            <button class="toggle-button" data-target="cbc">CBC</button>
            <button class="toggle-button" data-target="cmp">CMP</button>
            <button class="toggle-button" data-target="lipid">Lipid</button>
            <button class="toggle-button" data-target="thyroid">Thyroid</button>
            <button class="toggle-button" data-target="vitamins">Vitamins</button>
            <button class="toggle-button" data-target="inflammatory">Inflammatory</button>
            <button class="toggle-button" data-target="autoimmune">Autoimmune</button>
            <button class="toggle-button" data-target="tumor">Tumor Markers</button>
        </div>

        <div class="test-group active" id="timelineGroup">
            <h2>Testing Timeline</h2>
            <canvas id="timelineChart" style="max-height: 400px;"></canvas>
        </div>

        <div class="test-group" id="allGroup">
            <h2>All Tests Combined</h2>
            <div class="overflow"><table id="allTable"></table></div>
        </div>

        <div class="test-group" id="cbcGroup">
            <h2>Complete Blood Count</h2>
            <div class="overflow"><table id="cbcTable"></table></div>
        </div>

        <div class="test-group" id="cmpGroup">
            <h2>Comprehensive Metabolic Panel</h2>
            <div class="overflow"><table id="cmpTable"></table></div>
        </div>

        <div class="test-group" id="lipidGroup">
            <h2>Lipid Panel</h2>
            <div class="overflow"><table id="lipidTable"></table></div>
        </div>

        <div class="test-group" id="thyroidGroup">
            <h2>Thyroid Function</h2>
            <div class="overflow"><table id="thyroidTable"></table></div>
        </div>

        <div class="test-group" id="vitaminsGroup">
            <h2>Vitamins & Minerals</h2>
            <div class="overflow"><table id="vitaminsTable"></table></div>
        </div>

        <div class="test-group" id="inflammatoryGroup">
            <h2>Inflammatory Markers</h2>
            <div class="overflow"><table id="inflammatoryTable"></table></div>
        </div>

        <div class="test-group" id="autoimmuneGroup">
            <h2>Autoimmune Panel</h2>
            <div class="overflow"><table id="autoimmuneTable"></table></div>
        </div>

        <div class="test-group" id="tumorGroup">
            <h2>Tumor Markers</h2>
            <div class="overflow"><table id="tumorTable"></table></div>
        </div>
    </div>

    <script>
        const allDates = ['Feb 2016', 'Jul 2024', 'Aug 2024', 'Sep 2024', 'Dec 2024', 'Mar 2025', 'Oct 2025', 'Oct 22 2025'];
        
        const data = {
            cbc: [
                {test:'WBC', unit:'x10E3/uL', range:[4.5,11.0], vals:{0:8.5,1:7.5,6:7.5}},
                {test:'RBC', unit:'x10E6/uL', range:[4.5,5.9], vals:{0:5.42,1:5.2,6:4.83}},
                {test:'Hemoglobin', unit:'g/dL', range:[13.0,17.7], vals:{0:15.4,1:15.2,6:14.1}},
                {test:'Hematocrit', unit:'%', range:[37.5,51.0], vals:{0:45.9,1:45.8,6:42.9}},
                {test:'MCV', unit:'fL', range:[79,97], vals:{0:85,1:88,6:89}},
                {test:'MCH', unit:'pg', range:[26.6,33.0], vals:{0:28.4,1:29.2,6:29.2}},
                {test:'MCHC', unit:'g/dL', range:[31.5,35.7], vals:{0:33.6,1:33.2,6:32.9}},
                {test:'RDW', unit:'%', range:[11.6,15.4], vals:{0:13.4,1:12.8,6:13.1}},
                {test:'Platelets', unit:'x10E3/uL', range:[150,450], vals:{0:252,1:275,6:295}},
                {test:'Neutrophils', unit:'%', range:[40,75], vals:{0:63,1:67,6:66}},
                {test:'Neutrophils Absolute', unit:'x10E3/uL', range:[1.4,7.0], vals:{0:5.4,1:5.0,6:5.0}},
                {test:'Lymphs', unit:'%', range:[20,45], vals:{0:28,1:25,6:26}},
                {test:'Lymphs Absolute', unit:'x10E3/uL', range:[0.7,3.1], vals:{0:2.4,1:1.9,6:1.9}},
                {test:'Monocytes', unit:'%', range:[2,10], vals:{0:6,1:6,6:6}},
                {test:'Monocytes Absolute', unit:'x10E3/uL', range:[0.1,0.9], vals:{0:0.5,1:0.4,6:0.5}},
                {test:'Eos', unit:'%', range:[0,5], vals:{0:2,1:1,6:1}},
                {test:'Eos Absolute', unit:'x10E3/uL', range:[0.0,0.4], vals:{0:0.1,1:0.1,6:0.1}},
                {test:'Basos', unit:'%', range:[0,2], vals:{0:1,1:1,6:1}},
                {test:'Baso Absolute', unit:'x10E3/uL', range:[0.0,0.2], vals:{0:0.1,1:0.1,6:0.0}},
                {test:'Immature Granulocytes', unit:'%', range:[0,1], vals:{0:0,1:0,6:0}},
                {test:'Immature Grans Absolute', unit:'x10E3/uL', range:[0.0,0.1], vals:{0:0.0,1:0.0,6:0.0}}
            ],
            cmp: [
                {test:'Glucose', unit:'mg/dL', range:[70,99], vals:{0:82,1:91,2:81,5:82,6:85}},
                {test:'BUN', unit:'mg/dL', range:[6,20], vals:{0:13,1:25,2:20,5:18,6:15}},
                {test:'Creatinine', unit:'mg/dL', range:[0.76,1.27], vals:{0:0.92,1:1.43,2:1.23,5:0.93,6:1.03}},
                {test:'eGFR', unit:'mL/min/1.73', range:[60,120], vals:{0:118,1:68,2:81,5:113,6:100}},
                {test:'BUN/Creatinine Ratio', unit:'', range:[9,20], vals:{0:14,1:17,2:16,5:19,6:15}},
                {test:'Sodium', unit:'mmol/L', range:[134,144], vals:{0:139,1:140,2:139,5:136,6:139}},
                {test:'Potassium', unit:'mmol/L', range:[3.5,5.2], vals:{0:4.4,1:4.7,2:4.1,5:4.3,6:4.4}},
                {test:'Chloride', unit:'mmol/L', range:[96,106], vals:{0:100,1:104,2:102,5:99,6:104}},
                {test:'Carbon Dioxide Total', unit:'mmol/L', range:[20,29], vals:{0:26,1:21,2:24,5:24,6:23}},
                {test:'Calcium', unit:'mg/dL', range:[8.7,10.2], vals:{0:9.9,1:9.9,2:10.0,5:9.5,6:9.2}},
                {test:'Total Protein', unit:'g/dL', range:[6.0,8.5], vals:{0:7.7,1:7.8,2:7.1,3:7.5,5:7.1,6:6.5}},
                {test:'Albumin', unit:'g/dL', range:[4.3,5.2], vals:{0:4.8,1:4.8,2:4.7,3:4.1,5:4.5,6:4.3}},
                {test:'Globulin Total', unit:'g/dL', range:[1.5,4.5], vals:{0:2.9,1:3.0,2:2.4,3:3.4,5:2.6,6:2.2}},
                {test:'A/G Ratio', unit:'', range:[1.1,2.5], vals:{0:1.7,3:1.2}},
                {test:'Bilirubin Total', unit:'mg/dL', range:[0.0,1.2], vals:{0:0.5,1:0.4,2:0.8,5:0.7,6:0.4}},
                {test:'Alkaline Phosphatase', unit:'IU/L', range:[44,121], vals:{0:76,1:73,2:63,5:69,6:63}},
                {test:'AST (SGOT)', unit:'IU/L', range:[0,40], vals:{0:52,1:26,2:23,5:21,6:27}},
                {test:'ALT (SGPT)', unit:'IU/L', range:[0,44], vals:{0:42,1:15,2:21,5:16,6:23}}
            ],
            lipid: [
                {test:'Total Cholesterol', unit:'mg/dL', range:[100,199], vals:{1:198,5:185}},
                {test:'Triglycerides', unit:'mg/dL', range:[0,149], vals:{1:71,5:59}},
                {test:'HDL Cholesterol', unit:'mg/dL', range:[40,125], vals:{1:79,5:79}},
                {test:'LDL Cholesterol', unit:'mg/dL', range:[0,99], vals:{1:106,5:95}},
                {test:'VLDL Cholesterol', unit:'mg/dL', range:[5,40], vals:{1:13,5:11}}
            ],
            thyroid: [
                {test:'TSH', unit:'uIU/mL', range:[0.45,4.50], vals:{0:2.59,1:1.28,3:1.74,4:1.52,6:1.28}},
                {test:'Free T4', unit:'ng/dL', range:[0.82,1.77], vals:{3:1.61,6:1.31}},
                {test:'T4 Total', unit:'μg/dL', range:[4.5,12.0], vals:{6:3.9}},
                {test:'T3 Total', unit:'ng/dL', range:[71,180], vals:{6:79,6:72}},
                {test:'T3 Uptake', unit:'%', range:[24,39], vals:{6:32}},
                {test:'Free Thyroxine Index', unit:'', range:[1.2,4.9], vals:{6:1.2}}
            ],
            vitamins: [
                {test:'Vitamin B12', unit:'pg/mL', range:[232,1245], vals:{1:1929,5:1505,6:785}},
                {test:'Vitamin D 25-Hydroxy', unit:'ng/mL', range:[30,100], vals:{1:42.7,6:24.9,7:25.1}},
                {test:'Ferritin', unit:'ng/mL', range:[30,400], vals:{6:48,6:47}},
                {test:'Folate (Folic Acid)', unit:'ng/mL', range:[3,20], vals:{6:6.7}},
                {test:'Iron', unit:'μg/dL', range:[25,156], vals:{6:45}},
                {test:'Zinc Plasma/Serum', unit:'μg/dL', range:[60,130], vals:{6:60}}
            ],
            inflammatory: [
                {test:'C-Reactive Protein', unit:'mg/L', range:[0,10], vals:{3:'<1',4:'<1'}},
                {test:'Sedimentation Rate', unit:'mm/hr', range:[0,15], vals:{3:2,4:7}},
                {test:'Creatine Kinase Total', unit:'U/L', range:[0,200], vals:{3:132}}
            ],
            autoimmune: [
                {test:'ANA by IFA', unit:'', range:null, vals:{1:'Positive',3:'Negative',6:'Negative'}},
                {test:'Speckled Pattern', unit:'', range:null, vals:{1:'1:160'}},
                {test:'Spindle Apparatus Pattern', unit:'', range:null, vals:{1:'1:80'}},
                {test:'Anti-CCP Ab IgG/IgA', unit:'units', range:[0,20], vals:{3:7}},
                {test:'Anti-Sm Ab', unit:'', range:null, vals:{3:'<20'}},
                {test:'Anti-U1 RNP Ab', unit:'', range:null, vals:{3:'<20'}},
                {test:'dsDNA Crithidia', unit:'', range:null, vals:{3:'Negative'}},
                {test:'Rheumatoid Factor', unit:'', range:null, vals:{3:'<10.0'}},
                {test:'Sjogren Anti-SS-A', unit:'', range:null, vals:{3:'<0.2'}},
                {test:'Sjogren Anti-SS-B', unit:'', range:null, vals:{3:'<0.2'}},
                {test:'C3 Complement', unit:'mg/dL', range:[82,167], vals:{3:136}},
                {test:'C4 Complement', unit:'mg/dL', range:[14,44], vals:{3:26}},
                {test:'Immunoglobulin A', unit:'mg/dL', range:[90,386], vals:{3:239}},
                {test:'Immunoglobulin G', unit:'mg/dL', range:[603,1613], vals:{3:1303}},
                {test:'Immunoglobulin M', unit:'mg/dL', range:[20,172], vals:{3:104}},
                {test:'Alpha-1-Globulin', unit:'g/dL', range:[0,0.4], vals:{3:0.3}},
                {test:'Alpha-2-Globulin', unit:'g/dL', range:[0.4,1.0], vals:{3:0.7}},
                {test:'Beta Globulin', unit:'g/dL', range:[0.7,1.3], vals:{3:1.1}},
                {test:'Gamma Globulin', unit:'g/dL', range:[0.4,1.8], vals:{3:1.3}},
                {test:'M-Spike', unit:'', range:null, vals:{3:'Not Observed'}},
                {test:'Aldolase', unit:'U/L', range:[0,8], vals:{3:3.9}},
                {test:'Myoglobin Serum', unit:'ng/mL', range:[28,72], vals:{3:37}}
            ],
            tumor: [
                {test:'CA 19-9', unit:'U/mL', range:[0,35], vals:{4:9}},
                {test:'CA 125', unit:'U/mL', range:[0,35], vals:{2:11.0}}
            ]
        };

        function getClass(val, range) {
            if (!val || !range || typeof val === 'string') return '';
            const [min, max] = range;
            const mid = (min + max) / 2;
            const dev = Math.abs(val - mid) / (max - min) * 100;
            if (dev < 20) return 'result-normal';
            return val < mid ? 'result-low' : 'result-high';
        }

        function makeTable(id, tests) {
            let html = '<thead><tr><th>Test</th>';
            allDates.forEach(d => html += `<th>${d}</th>`);
            html += '<th>Range</th></tr></thead><tbody>';
            
            tests.forEach(t => {
                html += `<tr><td class="test-name">${t.test}</td>`;
                for(let i = 0; i < allDates.length; i++) {
                    const v = t.vals[i];
                    const cls = getClass(v, t.range);
                    html += `<td class="${cls}">${v !== undefined && v !== null ? v + (typeof v === 'number' ? ' ' + t.unit : '') : ''}</td>`;
                }
                html += `<td>${t.range ? t.range[0] + '-' + t.range[1] : 'N/A'}</td></tr>`;
            });
            
            document.getElementById(id).innerHTML = html + '</tbody>';
        }

        makeTable('cbcTable', data.cbc);
        makeTable('cmpTable', data.cmp);
        makeTable('lipidTable', data.lipid);
        makeTable('thyroidTable', data.thyroid);
        makeTable('vitaminsTable', data.vitamins);
        makeTable('inflammatoryTable', data.inflammatory);
        makeTable('autoimmuneTable', data.autoimmune);
        makeTable('tumorTable', data.tumor);

        const allTests = [...data.cbc, ...data.cmp, ...data.lipid, ...data.thyroid, ...data.vitamins, ...data.inflammatory, ...data.autoimmune, ...data.tumor];
        makeTable('allTable', allTests);

        const timelineData = allDates.map((d, i) => {
            let count = 0;
            allTests.forEach(test => {
                if (test.vals[i] !== undefined && test.vals[i] !== null) count++;
            });
            return count;
        });

        new Chart(document.getElementById('timelineChart'), {
            type: 'bar',
            data: {
                labels: allDates,
                datasets: [{
                    label: 'Number of Tests Performed',
                    data: timelineData,
                    backgroundColor: '#007bff',
                    borderColor: '#0056b3',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: { stepSize: 5 }
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'Testing History Timeline',
                        font: { size: 16 }
                    }
                }
            }
        });

        document.querySelectorAll('.toggle-button').forEach(b => {
            b.onclick = () => {
                document.querySelectorAll('.toggle-button').forEach(x => x.classList.remove('active'));
                document.querySelectorAll('.test-group').forEach(x => x.classList.remove('active'));
                b.classList.add('active');
                document.getElementById(b.dataset.target + 'Group').classList.add('active');
            };
        });
    </script>
</body>
</html>
